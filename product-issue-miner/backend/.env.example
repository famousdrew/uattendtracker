# =============================================================================
# Product Issue Miner - Environment Configuration
# =============================================================================
# This file contains all required environment variables for the application.
# Copy this file to .env and fill in your actual values.
# NEVER commit the .env file to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Zendesk API Configuration
# -----------------------------------------------------------------------------
# Your Zendesk subdomain (e.g., 'company' for company.zendesk.com)
ZENDESK_SUBDOMAIN=workwelltech

# Zendesk user email for API authentication
ZENDESK_EMAIL=your-email@example.com

# Zendesk API token (Settings > API > Add API Token)
# SECURITY: Keep this secret! Rotate regularly.
ZENDESK_API_TOKEN=your-zendesk-api-token

# -----------------------------------------------------------------------------
# Anthropic API Configuration
# -----------------------------------------------------------------------------
# Anthropic API key for Claude AI (https://console.anthropic.com/)
# SECURITY: Keep this secret! Monitor usage and costs.
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# PostgreSQL database URL
# Format: postgresql+asyncpg://username:password@host:port/database
# For local development:
DATABASE_URL=postgresql+asyncpg://username:password@localhost:5432/product_issue_miner

# For production, use a secure password and consider connection pooling:
# DATABASE_URL=postgresql+asyncpg://produser:secure_pass@db.example.com:5432/prod_db

# -----------------------------------------------------------------------------
# Redis Configuration (Optional)
# -----------------------------------------------------------------------------
# Redis URL for caching and background job queues
# For local development:
REDIS_URL=redis://localhost:6379/0

# For production with password:
# REDIS_URL=redis://:password@redis.example.com:6379/0

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# Dashboard password for API authentication via X-Dashboard-Password header
# SECURITY: Use a strong, randomly generated password (minimum 16 characters)
# Generate with: openssl rand -base64 32
DASHBOARD_PASSWORD=change-this-to-a-strong-random-password

# CORS allowed origins (comma-separated list)
# Development (allow localhost):
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# Production (specific domains only):
# CORS_ORIGINS=https://dashboard.example.com,https://app.example.com

# IMPORTANT: Never use "*" in production!
# CORS_ORIGINS=*

# -----------------------------------------------------------------------------
# Rate Limiting Configuration
# -----------------------------------------------------------------------------
# Maximum authentication requests per minute per IP
# Lower values provide better protection against brute force attacks
AUTH_RATE_LIMIT=5

# Maximum general API requests per minute per IP
# Adjust based on expected legitimate usage patterns
GENERAL_RATE_LIMIT=100

# -----------------------------------------------------------------------------
# Request Configuration
# -----------------------------------------------------------------------------
# Maximum request body size in bytes (default: 10MB)
# 10MB = 10 * 1024 * 1024 = 10485760
MAX_REQUEST_SIZE=10485760

# -----------------------------------------------------------------------------
# Environment Configuration
# -----------------------------------------------------------------------------
# Application environment: development, staging, production
# This affects security headers, logging, and error handling
ENVIRONMENT=development

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# -----------------------------------------------------------------------------
# API Configuration (Optional)
# -----------------------------------------------------------------------------
# Base URL for API endpoints (used in generated links)
API_BASE_URL=http://localhost:8000

# Frontend URL (legacy, use CORS_ORIGINS instead)
FRONTEND_URL=http://localhost:3000

# =============================================================================
# Production Deployment Checklist
# =============================================================================
# Before deploying to production, ensure:
#
# 1. Security:
#    [ ] DASHBOARD_PASSWORD is strong and randomly generated
#    [ ] All API keys are production keys (not test/development keys)
#    [ ] CORS_ORIGINS contains only your production domains (no "*")
#    [ ] ENVIRONMENT is set to "production"
#    [ ] Database uses strong password and SSL/TLS connection
#    [ ] Redis uses authentication (password) if exposed
#
# 2. Monitoring:
#    [ ] LOG_LEVEL is set appropriately (INFO or WARNING for production)
#    [ ] Application logs are being collected and monitored
#    [ ] API usage is being tracked for rate limiting effectiveness
#
# 3. Backup:
#    [ ] Database backups are configured and tested
#    [ ] Secrets are backed up securely (use a secrets manager)
#
# 4. Rate Limiting:
#    [ ] AUTH_RATE_LIMIT and GENERAL_RATE_LIMIT are tuned for your use case
#    [ ] Consider using Redis for distributed rate limiting
#
# =============================================================================
